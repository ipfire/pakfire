
include ../Makeconfig

.PHONY: all
all: $(PACKAGE_VERSION_FILE)
	# Build the binary parts.
	$(MAKE) -C src

.PHONY: install
install: $(PACKAGE_VERSION_FILE)
	for mod in $(PYTHON_MODULES); do \
		mkdir -pv $(DESTDIR)$(PYTHON_DIR)/$${mod}; \
		cp -vrf $${mod}/*.py $(DESTDIR)$(PYTHON_DIR)/$${mod} || exit; \
	done

	$(MAKE) -C src install

.PHONY: clean
clean:
	rm -f $(PACKAGE_VERSION_FILE)

	$(MAKE) -C src clean

$(PACKAGE_VERSION_FILE): ../Makeconfig
	echo "# this file is autogenerated by the buildsystem" > $(PACKAGE_VERSION_FILE)
	echo "PAKFIRE_VERSION = \"$(PACKAGE_VERSION)\"" >> $(PACKAGE_VERSION_FILE)

