
PACKAGE_NAME    = pakfire
PACKAGE_VERSION = 0.9.12
PACKAGE_AUTHOR  = IPFire.org Team
PACKAGE_AUTHOR_EMAIL = info@ipfire.org
PACKAGE_URL     = http://redmine.ipfire.org/projects/buildsystem3
PACKAGE_VERSION_FILE = pakfire/__version__.py

PREFIX ?= /usr

# Are we running on Debian?
DEBIAN = $(shell test -e /etc/debian_version && echo 1 || echo 0)

CC = gcc
CFLAGS ?= -O2 -pipe
MACHINE = $(shell uname -m)

ifeq "$(MACHINE)" "x86_64"
	LIBDIR = $(PREFIX)/lib64
else
	LIBDIR = $(PREFIX)/lib
endif

# Get the version and configuration of the python interpreter.
PYTHON_VERSION = $(shell python -c "import platform; print '.'.join(platform.python_version_tuple()[:2])")
PYTHON_CC      = $(CC) -pthread -fPIC
PYTHON_CFLAGS  = $(shell python-config --cflags)
PYTHON_MODULES = pakfire pakfire/packages pakfire/repository
ifeq "$(DEBIAN)" "1"
	PYTHON_DIR = $(LIBDIR)/python$(PYTHON_VERSION)/dist-packages
else
	PYTHON_DIR = $(LIBDIR)/python$(PYTHON_VERSION)/site-packages
endif

# The place, where all internally used scripts and bins are copied.
SCRIPT_DIR     = $(PREFIX)/lib/$(PACKAGE_NAME)

TOP := $(dir $(lastword $(MAKEFILE_LIST)))

# A list of all files that contain translations and need to
# be indexed.
TRANS_FILES  = $(addsuffix /*.py,$(addprefix python/,$(PYTHON_MODULES)))
TRANS_FILES += python/src/*.c scripts/pakfire-multicall.py
